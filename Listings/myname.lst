C51 COMPILER V9.59.0.0   MYNAME                                                            01/19/2019 15:26:32 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE MYNAME
OBJECT MODULE PLACED IN .\Objects\myname.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE myname.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\my
                    -name.lst) TABS(2) OBJECT(.\Objects\myname.obj)

line level    source

   1          // To display the string "Abhishek P" on a 16X2 LCD display connected to a 
   2          //AT89C51 microcontroller with 12MHz clock.
   3          // The bits D7-D0 are connected to port 2 bits P2.7 - P2.0.
   4          // RS -> P3.0
   5          // E -> P3.2
   6          // R/W -> P3.1
   7          #include<reg51.h>
   8          
   9          void lcdInit(void);
  10          void writeCommand(unsigned char );
  11          void writeData(unsigned char );
  12          void msdelay(unsigned char );
  13          void lcdReady(void);
  14          
  15          
  16          
  17          sbit rs = P3^0;
  18          sbit e = P3^2;
  19          sbit rw = P3^1;
  20          sbit ready = P2^7;
  21          
  22          void main(void){
  23   1        unsigned char myname[] = "Abhishek P";
  24   1        unsigned char count,addcount,address;
  25   1        lcdInit();
  26   1        while(1){
  27   2        for(addcount=0x00;addcount<0x19;addcount++){
  28   3          address = 0x8F - addcount;
  29   3          writeCommand(address);
  30   3          for(count = 0;count<10;count++){
  31   4            writeData(myname[count]);
  32   4          }
  33   3        }
  34   2      }
  35   1      }
  36          void lcdInit(void){
  37   1          writeCommand(0x38);
  38   1          writeCommand(0x0E);
  39   1          writeCommand(0x01);
  40   1          //writeCommand(0x8F);
  41   1          return;
  42   1      }
  43          void writeCommand(unsigned char command){
  44   1          // sends the command to the command register of the lcd.
  45   1          lcdReady(); // check is LCD is ready to receive command
  46   1          P2 = command; // output command on port 2
  47   1          rs = 0; // rs = 0 selects command register in the LCD
  48   1          rw = 0; // rw = 0 writes data into the LCD
  49   1          e = 1;  // high pulse on E
  50   1          msdelay(1); // delay
  51   1          e = 0; // H-to-L transition.
  52   1          return;
  53   1      }
  54          
C51 COMPILER V9.59.0.0   MYNAME                                                            01/19/2019 15:26:32 PAGE 2   

  55          void writeData(unsigned char databyte){
  56   1          // writes data into the dataregister of lcd display.
  57   1          lcdReady();
  58   1          P2 = databyte;// output data on port 2
  59   1          rs = 1; // rs = 1 selects data register in the LCD
  60   1          rw = 0; // rw = 0 writes data into lcd
  61   1          e = 1; // high pulse on E
  62   1          msdelay(1); // delay
  63   1          e = 0; // H-to-L transition
  64   1          return;
  65   1      }
  66          
  67          void msdelay(unsigned char delay){
  68   1          // max value of delay = 200ms. 
  69   1          unsigned int mcount = 4 * delay; // initailize max count
  70   1          unsigned int count;
  71   1          TMOD = 0x02; // timer 0 in mode 2
  72   1          TH0 = 0x06; // autoreload value to produce 0.25ms delay
  73   1          TR0 = 1; // start counter
  74   1          for(count = 0;count<mcount;count++){
  75   2              while(TF0 == 0);
  76   2              TF0 = 1; // clear overflow flag
  77   2          }
  78   1          TR0 = 0; //stop timer
  79   1          return;
  80   1      }
  81          
  82          void lcdReady(void){
  83   1          // checks if LCD is ready to receive data/commands
  84   1          P2 = 0xFF; // initialises port2 as input port
  85   1          rs = 0; // command register select
  86   1          rw = 1; // read command register
  87   1          while(ready == 1)     // loop while LCD is busy
  88   1          {
  89   2            e = 0;
  90   2            msdelay(2);
  91   2            e = 1;
  92   2          
  93   2          }
  94   1          rw = 0;
  95   1          return;
  96   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    195    ----
   CONSTANT SIZE    =     11    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      15
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
